<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Smart Cut Services - Gestion de la Page Accueil</title>
    <meta name="description" content="Dashboard d'administration pour g√©rer le contenu de la page d'accueil">
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#1E40AF',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        dark: '#1F2937',
                        light: '#F9FAFB'
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                        'slide-in': 'slideIn 0.3s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(-10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background-color: #f5f7fa;
        }
        
        /* Scrollbar personnalis√©e */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* Animations */
        .fade-enter {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .slide-enter {
            animation: slideIn 0.3s ease-out;
        }
        
        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .badge-success {
            background-color: #D1FAE5;
            color: #065F46;
        }
        
        .badge-warning {
            background-color: #FEF3C7;
            color: #92400E;
        }
        
        .badge-danger {
            background-color: #FEE2E2;
            color: #991B1B;
        }
        
        .badge-info {
            background-color: #DBEAFE;
            color: #1E40AF;
        }
        
        /* Cards */
        .admin-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .admin-card:hover {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        /* Toggle switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #3B82F6;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        
        /* Loading skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Form styles */
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: all 0.2s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .admin-card {
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body class="antialiased text-gray-800">
    <!-- Header Admin -->
    <header class="sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <div class="flex items-center justify-between mb-4 md:mb-0">
                    
                    <!-- Mobile menu button -->
                    <button id="mobile-menu-btn" class="md:hidden text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="hidden md:flex space-x-1" id="desktop-nav">
                    <a href="#hero" class="nav-tab px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-star mr-2"></i> Vedettes
                    </a>
                    <a href="#advantages" class="nav-tab px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-thumbs-up mr-2"></i>Avantages
                    </a>
                    <a href="#products" class="nav-tab px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-fire mr-2"></i> Populaires
                    </a>
                    <a href="#process" class="nav-tab px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-cogs mr-2"></i>Processus
                    </a>
                    <a href="#delivery" class="nav-tab px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-truck mr-2"></i>Livraison
                    </a>
                    <a href="#cta" class="nav-tab px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors">
                        <i class="fas fa-bullhorn mr-2"></i>CTA 
                    </a>
                </nav>
                
                <!-- Status & Actions -->
                <div class="hidden md:flex items-center space-x-4">
                    <div id="connection-status" class="flex items-center">
                        <span class="w-2 h-2 rounded-full bg-gray-400 mr-2" id="connection-indicator"></span>
                        <span class="text-sm text-gray-600" id="connection-text">D√©connect√©</span>
                    </div>
                    <button id="refresh-data" class="px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-nav" class="hidden md:hidden mt-4 border-t border-gray-100 pt-4">
                <div class="grid grid-cols-2 gap-2">
                    <a href="#hero" class="nav-tab text-center px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-sm">
                        <i class="fas fa-star mr-1"></i>Vedettes
                    </a>
                    <a href="#advantages" class="nav-tab text-center px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-sm">
                        <i class="fas fa-thumbs-up mr-1"></i>Avantages
                    </a>
                    <a href="#products" class="nav-tab text-center px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-sm">
                        <i class="fas fa-fire mr-1"></i>Populaires
                    </a>
                    <a href="#process" class="nav-tab text-center px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-sm">
                        <i class="fas fa-cogs mr-1"></i>Processus
                    </a>
                    <a href="#delivery" class="nav-tab text-center px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-sm">
                        <i class="fas fa-truck mr-1"></i>Livraison
                    </a>
                    <a href="#cta" class="nav-tab text-center px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-sm">
                        <i class="fas fa-bullhorn mr-1"></i>CTA
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Status Messages -->
        <div id="status-messages" class="mb-6 space-y-3"></div>
        
        <!-- üü¢ SECTION A ‚Äî GESTION DU HERO -->
        <section id="hero" class="mb-12">
            <div class="admin-card p-6">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">
                            <i class="fas fa-star text-primary mr-2"></i>
                            Produits Vedettes (Hero)
                        </h2>
                        <p class="text-gray-600">Choisissez les produits qui appara√Ætront dans le slider principal de la page d'accueil</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <span class="badge badge-info">
                            <span id="hero-count">0</span>s√©lectionn√©(s)
                        </span>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-200">
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Produit</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Prix</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Disponibilit√©</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Afficher dans le Hero</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="hero-products-list">
                            <!-- Produits charg√©s dynamiquement -->
                            <tr>
                                <td colspan="5" class="py-12 text-center">
                                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mb-3"></div>
                                    <p class="text-gray-500">Chargement des produits...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-6 p-4 bg-blue-50 rounded-lg border border-blue-100">
                    <div class="flex items-start">
                        <i class="fas fa-info-circle text-blue-500 mt-1 mr-3"></i>
                        <div>
                            <h4 class="font-medium text-blue-900 mb-1">Comment fonctionne cette section ?</h4>
                            <p class="text-blue-700 text-sm">Les produits activ√©s appara√Ætront dans le slider automatique de la page d'accueil. Vous pouvez s√©lectionner jusqu'√† 5 produits pour un rendu optimal.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- üü° SECTION B ‚Äî AVANTAGES -->
        <section id="advantages" class="mb-12">
            <div class="admin-card p-6">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">
                            <i class="fas fa-thumbs-up text-primary mr-2"></i>
                            Avantages (Pourquoi nous choisir)
                        </h2>
                        <p class="text-gray-600">G√©rez les avantages affich√©s dans la section "Pourquoi nous choisir"</p>
                    </div>
                    <button id="add-advantage-btn" class="mt-4 md:mt-0 px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                        <i class="fas fa-plus mr-2"></i>Ajouter un avantage
                    </button>
                </div>
                
                <div id="advantages-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Avantages charg√©s dynamiquement -->
                    <div class="col-span-full">
                        <div class="text-center py-12">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mb-3"></div>
                            <p class="text-gray-500">Chargement des avantages...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Modal Ajout/Modification Avantage -->
                <div id="advantage-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/50">
                    <div class="bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-xl font-bold text-gray-900" id="modal-title">Nouvel avantage</h3>
                                <button id="close-modal" class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            
                            <form id="advantage-form" class="space-y-4">
                                <input type="hidden" id="advantage-id">
                                
                                <div>
                                    <label for="advantage-icon" class="form-label">
                                        <i class="fas fa-icons mr-1"></i>Ic√¥ne Font Awesome
                                    </label>
                                    <div class="relative">
                                        <select id="advantage-icon" class="form-input" required>
                                            <option value="">Choisir une ic√¥ne...</option>
                                            <option value="fas fa-truck">üöö Livraison rapide</option>
                                            <option value="fas fa-shield-alt">üõ°Ô∏è Garantie</option>
                                            <option value="fas fa-headset">üéß Support 24/7</option>
                                            <option value="fas fa-tags">üè∑Ô∏è Meilleurs prix</option>
                                            <option value="fas fa-award">üèÜ Qualit√© premium</option>
                                            <option value="fas fa-lock">üîí Paiement s√©curis√©</option>
                                            <option value="fas fa-undo">‚Ü©Ô∏è Retours faciles</option>
                                            <option value="fas fa-star">‚≠ê Avis v√©rifi√©s</option>
                                        </select>
                                        <div class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                    </div>
                                    <p class="mt-1 text-sm text-gray-500">Exemple: fas fa-truck</p>
                                </div>
                                
                                <div>
                                    <label for="advantage-title" class="form-label">
                                        <i class="fas fa-heading mr-1"></i>Titre
                                    </label>
                                    <input type="text" id="advantage-title" class="form-input" placeholder="Ex: Livraison express" required maxlength="50">
                                    <p class="mt-1 text-sm text-gray-500">Maximum 50 caract√®res</p>
                                </div>
                                
                                <div>
                                    <label for="advantage-description" class="form-label">
                                        <i class="fas fa-align-left mr-1"></i>Description
                                    </label>
                                    <textarea id="advantage-description" class="form-input" rows="3" placeholder="Ex: Recevez votre commande sous 24h" required maxlength="150"></textarea>
                                    <p class="mt-1 text-sm text-gray-500">Maximum 150 caract√®res</p>
                                </div>
                                
                                <div class="flex justify-end space-x-3 pt-4">
                                    <button type="button" id="cancel-modal" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                        Annuler
                                    </button>
                                    <button type="submit" id="save-advantage" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                                        <i class="fas fa-save mr-2"></i>Enregistrer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- üîµ SECTION C ‚Äî PRODUITS POPULAIRES -->
        <section id="products" class="mb-12">
            <div class="admin-card p-6">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">
                            <i class="fas fa-fire text-primary mr-2"></i>
                            Produits Populaires & Nouveaut√©s
                        </h2>
                        <p class="text-gray-600">D√©finissez quels produits sont mis en avant sur la page d'accueil</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-2">
                        <span class="badge badge-success">
                            <span id="popular-count">0</span> populaire(s)
                        </span>
                        <span class="badge badge-info">
                            <span id="new-count">0</span> nouveau(x)
                        </span>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-200">
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Produit</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Prix</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Produit Populaire</th>
                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Nouveau Produit</th>
                            </tr>
                        </thead>
                        <tbody id="featured-products-list">
                            <!-- Produits charg√©s dynamiquement -->
                            <tr>
                                <td colspan="4" class="py-12 text-center">
                                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mb-3"></div>
                                    <p class="text-gray-500">Chargement des produits...</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-100">
                    <div class="flex items-start">
                        <i class="fas fa-lightbulb text-yellow-500 mt-1 mr-3"></i>
                        <div>
                            <h4 class="font-medium text-yellow-900 mb-1">Recommandation</h4>
                            <p class="text-yellow-700 text-sm">Pour un meilleur impact visuel, nous recommandons de s√©lectionner 4-6 produits populaires et 2-3 nouveaux produits maximum.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- üü£ SECTION D ‚Äî SECTION PROCESSUS -->
        <section id="process" class="mb-12">
            <div class="admin-card p-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">
                    <i class="fas fa-cogs text-primary mr-2"></i>
                    Section Processus (Comment √ßa marche)
                </h2>
                <p class="text-gray-600 mb-6">Activez ou d√©sactivez l'affichage de la section "Comment √ßa marche" sur la page d'accueil</p>
                
                <div class="flex items-center justify-between p-6 bg-gray-50 rounded-lg border border-gray-200">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-1">Affichage de la section</h3>
                        <p class="text-gray-600">Le contenu de cette section est pr√©d√©fini et ne peut pas √™tre modifi√© ici.</p>
                    </div>
                    <div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="process-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <p class="text-sm text-gray-500 mt-2 text-center" id="process-status">D√©sactiv√©</p>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-purple-50 rounded-lg border border-purple-100">
                    <div class="flex items-start">
                        <i class="fas fa-info-circle text-purple-500 mt-1 mr-3"></i>
                        <div>
                            <h4 class="font-medium text-purple-900 mb-1">Information importante</h4>
                            <p class="text-purple-700 text-sm">Cette section contr√¥le uniquement l'affichage de la section "Comment √ßa marche". Le contenu (texte, √©tapes) est statique c√¥t√© client et ne peut √™tre modifi√© que par d√©veloppement.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- üü† SECTION E ‚Äî OPTIONS DE LIVRAISON -->
        <section id="delivery" class="mb-12">
            <div class="admin-card p-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">
                    <i class="fas fa-truck text-primary mr-2"></i>
                    Options de Livraison
                </h2>
                <p class="text-gray-600 mb-6">Affichez ou masquez la section des options de livraison sur la page d'accueil</p>
                
                <div class="flex items-center justify-between p-6 bg-gray-50 rounded-lg border border-gray-200">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-1">Affichage des options</h3>
                        <p class="text-gray-600">Les options de livraison disponibles (domicile, rencontre, point de vente) sont pr√©d√©finies.</p>
                    </div>
                    <div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="delivery-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <p class="text-sm text-gray-500 mt-2 text-center" id="delivery-status">D√©sactiv√©</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- üî¥ SECTION F ‚Äî CTA FINAL -->
        <section id="cta" class="mb-12">
            <div class="admin-card p-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">
                    <i class="fas fa-bullhorn text-primary mr-2"></i>
                    CTA Final (Call to Action)
                </h2>
                <p class="text-gray-600 mb-6">Modifiez le texte du bouton d'action principal en bas de la page d'accueil</p>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Formulaire -->
                    <div>
                        <form id="cta-form" class="space-y-6">
                            <div>
                                <label for="cta-title" class="form-label">
                                    <i class="fas fa-heading mr-1"></i>Titre principal
                                </label>
                                <input type="text" id="cta-title" class="form-input" placeholder="Ex: Pr√™t √† d√©couvrir nos produits ?" required maxlength="80">
                                <p class="mt-1 text-sm text-gray-500">Titre visible en gros, maximum 80 caract√®res</p>
                            </div>
                            
                            <div>
                                <label for="cta-subtitle" class="form-label">
                                    <i class="fas fa-align-left mr-1"></i>Sous-titre
                                </label>
                                <textarea id="cta-subtitle" class="form-input" rows="3" placeholder="Ex: Rejoignez des milliers de clients satisfaits" required maxlength="150"></textarea>
                                <p class="mt-1 text-sm text-gray-500">Texte d'accompagnement, maximum 150 caract√®res</p>
                            </div>
                            
                            <div class="pt-4">
                                <button type="submit" id="save-cta" class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold">
                                    <i class="fas fa-save mr-2"></i>Enregistrer les modifications
                                </button>
                                <p class="mt-2 text-sm text-gray-500">Les modifications seront visibles imm√©diatement sur le site</p>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Preview -->
                    <div>
                        <div class="sticky top-24">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                <i class="fas fa-eye mr-2"></i>Pr√©visualisation
                            </h3>
                            <div class="bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-8 text-white">
                                <div class="text-center">
                                    <h4 id="cta-preview-title" class="text-2xl md:text-3xl font-bold mb-4">Pr√™t √† d√©couvrir nos produits ?</h4>
                                    <p id="cta-preview-subtitle" class="text-lg mb-8 opacity-90">Rejoignez des milliers de clients satisfaits</p>
                                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                                        <button class="bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                                            <i class="fas fa-store mr-2"></i>Acc√©der au catalogue
                                        </button>
                                        <button class="bg-transparent border-2 border-white px-6 py-3 rounded-lg font-semibold hover:bg-white/10 transition-colors">
                                            <i class="fas fa-shopping-cart mr-2"></i>Voir le panier
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-4 text-sm text-gray-500 text-center">
                                Cette pr√©visualisation montre approximativement le rendu sur la page d'accueil
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Admin -->
    <footer class="bg-dark text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                   
                    <p class="text-gray-400 text-sm">Dashboard de gestion de contenu</p>
                </div>
                
                <div class="flex items-center space-x-6">
                    <div class="text-center">
                        <div class="text-2xl font-bold" id="total-products">0</div>
                        <div class="text-gray-400 text-sm">Produits</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold" id="total-advantages">0</div>
                        <div class="text-gray-400 text-sm">Avantages</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold" id="last-update">-</div>
                        <div class="text-gray-400 text-sm">Derni√®re mise √† jour</div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p class="text-sm">
                    <i class="fas fa-shield-alt mr-1"></i>
                    Seules les collections <strong>products</strong> et <strong>home_content</strong> sont accessibles
                </p>
                <p class="text-xs mt-2">¬© 2026 . Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-4 right-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl border border-gray-200 min-w-80 max-w-md transform translate-y-full transition-transform duration-300">
            <div class="p-4">
                <div class="flex items-start">
                    <div id="toast-icon" class="mr-3 mt-1">
                        <!-- Icon will be set dynamically -->
                    </div>
                    <div class="flex-grow">
                        <h4 id="toast-title" class="font-semibold text-gray-900"></h4>
                        <p id="toast-message" class="text-sm text-gray-600 mt-1"></p>
                    </div>
                    <button id="close-toast" class="text-gray-400 hover:text-gray-600 ml-2">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div id="toast-progress" class="h-1 bg-green-500 rounded-b-lg w-0"></div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/50">
        <div class="bg-white rounded-xl shadow-2xl max-w-sm w-full">
            <div class="p-6">
                <div class="flex items-center mb-4">
                    <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center mr-3">
                        <i class="fas fa-exclamation-triangle text-red-500"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900" id="confirm-title">Confirmer la suppression</h3>
                </div>
                
                <p id="confirm-message" class="text-gray-600 mb-6">√ätes-vous s√ªr de vouloir effectuer cette action ?</p>
                
                <div class="flex justify-end space-x-3">
                    <button id="cancel-confirm" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Annuler
                    </button>
                    <button id="confirm-action" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                        Confirmer
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- ------------------------------------------------------------------------------------------------------------
     ==========================================================================================================
     ==========================================
      --><!-- Bulle de navigation unique -->
<!-- Bulle de navigation unique -->
<!-- Bulle de navigation unique -->
<div id="navBubbleUniq" class="fixed bottom-4 right-4 z-50 transition-all duration-300">
  <!-- Bouton principal de la bulle -->
  <button id="navBubbleBtnUniq" 
          class="w-14 h-14 md:w-16 md:h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center group active:scale-95 focus:outline-none focus:ring-4 focus:ring-indigo-500/30">
    <i class="fas fa-rocket text-white text-xl md:text-2xl group-hover:rotate-90 transition-transform duration-300"></i>
    <span class="absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white text-xs rounded-full flex items-center justify-center animate-pulse">7</span>
  </button>

  <!-- Menu d√©roulant -->
  <div id="navBubbleMenuUniq" 
       class="absolute bottom-20 right-0 w-72 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl opacity-0 scale-95 pointer-events-none transition-all duration-300 transform origin-bottom-right border border-gray-100 dark:border-gray-700">
    
    <!-- En-t√™te du menu -->
    <div class="p-4 border-b border-gray-100 dark:border-gray-700">
      <div class="flex items-center justify-between">
        <h3 class="font-bold text-gray-800 dark:text-white flex items-center gap-2">
          <i class="fas fa-space-shuttle text-indigo-500"></i>
          Navigation Dashboard
        </h3>
        <span class="text-xs px-2 py-1 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-300 rounded-full">7 liens</span>
      </div>
      <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Acc√®s rapide aux sections principales</p>
    </div>

    <!-- Liste des liens -->
    <div class="p-2 space-y-1 max-h-96 overflow-y-auto custom-scrollbar-uniq">
      <!-- Lien Dashboard Accueil -->
      <a href="dashacceuil.html" 
         class="navBubbleLinkUniq flex items-center gap-3 p-3 rounded-xl hover:bg-indigo-50 dark:hover:bg-gray-700 transition-colors duration-200 group focus:outline-none focus:bg-indigo-50 dark:focus:bg-gray-700">
        <div class="w-10 h-10 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg flex items-center justify-center flex-shrink-0">
          <i class="fas fa-home text-indigo-600 dark:text-indigo-400"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="font-semibold text-gray-800 dark:text-white truncate">Dashboard Accueil</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Tableau de bord principal</p>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-indigo-500 transition-colors flex-shrink-0"></i>
      </a>

      <!-- Lien Confidentialit√© -->
      <a href="dashconfi.html" 
         class="navBubbleLinkUniq flex items-center gap-3 p-3 rounded-xl hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200 group focus:outline-none focus:bg-blue-50 dark:focus:bg-gray-700">
        <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0">
          <i class="fas fa-shield-alt text-blue-600 dark:text-blue-400"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="font-semibold text-gray-800 dark:text-white truncate">Confidentialit√©</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Gestion des donn√©es priv√©es</p>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-blue-500 transition-colors flex-shrink-0"></i>
      </a>

      <!-- Lien Livraison -->
      <a href="livraisondash.html" 
         class="navBubbleLinkUniq flex items-center gap-3 p-3 rounded-xl hover:bg-green-50 dark:hover:bg-gray-700 transition-colors duration-200 group focus:outline-none focus:bg-green-50 dark:focus:bg-gray-700">
        <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center flex-shrink-0">
          <i class="fas fa-shipping-fast text-green-600 dark:text-green-400"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="font-semibold text-gray-800 dark:text-white truncate">Dashboard Livraison</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Suivi des commandes</p>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-green-500 transition-colors flex-shrink-0"></i>
      </a>

      <!-- Lien Catalogue -->
      <a href="catalogue-admin.html" 
         class="navBubbleLinkUniq flex items-center gap-3 p-3 rounded-xl hover:bg-purple-50 dark:hover:bg-gray-700 transition-colors duration-200 group focus:outline-none focus:bg-purple-50 dark:focus:bg-gray-700">
        <div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center flex-shrink-0">
          <i class="fas fa-boxes text-purple-600 dark:text-purple-400"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="font-semibold text-gray-800 dark:text-white truncate">Catalogue Admin</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Gestion des produits</p>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-purple-500 transition-colors flex-shrink-0"></i>
      </a>

      <!-- Lien Commandes -->
      <a href="panier.html" 
         class="navBubbleLinkUniq flex items-center gap-3 p-3 rounded-xl hover:bg-amber-50 dark:hover:bg-gray-700 transition-colors duration-200 group focus:outline-none focus:bg-amber-50 dark:focus:bg-gray-700">
        <div class="w-10 h-10 bg-amber-100 dark:bg-amber-900/30 rounded-lg flex items-center justify-center flex-shrink-0">
          <i class="fas fa-shopping-cart text-amber-600 dark:text-amber-400"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="font-semibold text-gray-800 dark:text-white truncate">Commandes & Panier</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Paiements et transactions</p>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-amber-500 transition-colors flex-shrink-0"></i>
      </a>

      <!-- Lien About -->
      <a href="dashabout.html" 
         class="navBubbleLinkUniq flex items-center gap-3 p-3 rounded-xl hover:bg-cyan-50 dark:hover:bg-gray-700 transition-colors duration-200 group focus:outline-none focus:bg-cyan-50 dark:focus:bg-gray-700">
        <div class="w-10 h-10 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg flex items-center justify-center flex-shrink-0">
          <i class="fas fa-info-circle text-cyan-600 dark:text-cyan-400"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="font-semibold text-gray-800 dark:text-white truncate">√Ä propos</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Informations sur l'application</p>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-cyan-500 transition-colors flex-shrink-0"></i>
      </a>

      <!-- Lien Transfert -->
      <a href="marquee.html" 
         class="navBubbleLinkUniq flex items-center gap-3 p-3 rounded-xl hover:bg-pink-50 dark:hover:bg-gray-700 transition-colors duration-200 group focus:outline-none focus:bg-pink-50 dark:focus:bg-gray-700">
        <div class="w-10 h-10 bg-pink-100 dark:bg-pink-900/30 rounded-lg flex items-center justify-center flex-shrink-0">
          <i class="fas fa-exchange-alt text-pink-600 dark:text-pink-400"></i>
        </div>
        <div class="flex-1 min-w-0">
          <p class="font-semibold text-gray-800 dark:text-white truncate">Transfert</p>
          <p class="text-xs text-gray-500 dark:text-gray-400 truncate">Transferts et transactions</p>
        </div>
        <i class="fas fa-chevron-right text-gray-400 group-hover:text-pink-500 transition-colors flex-shrink-0"></i>
      </a>
    </div>

    <!-- Footer du menu -->
    <div class="p-3 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 rounded-b-2xl">
      <div class="flex items-center justify-between">
        <div class="text-xs text-gray-500 dark:text-gray-400">
          <span class="font-medium">v1.2.0</span>
          <span class="mx-1">‚Ä¢</span>
          <span>Navigation avanc√©e</span>
        </div>
        <button id="navBubbleCloseUniq" 
                class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500/50">
          <i class="fas fa-times text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// Variables globales uniques pour la bulle
let navBubbleDragStateUniq = {
  isDragging: false,
  startX: 0,
  startY: 0,
  startLeft: 0,
  startTop: 0
};

let navBubbleMenuStateUniq = {
  isOpen: false,
  isAnimating: false
};

let navBubbleTouchTimerUniq = null;

// R√©f√©rences aux √©l√©ments DOM
const navBubbleContainerUniq = document.getElementById('navBubbleUniq');
const navBubbleToggleUniq = document.getElementById('navBubbleBtnUniq');
const navBubbleDropdownUniq = document.getElementById('navBubbleMenuUniq');
const navBubbleCloseTriggerUniq = document.getElementById('navBubbleCloseUniq');
const navBubbleMenuLinksUniq = document.querySelectorAll('.navBubbleLinkUniq');

// Initialisation de la bulle
function setupNavBubbleUniq() {
  loadNavBubblePositionUniq();
  attachNavBubbleEventsUniq();
  setupNavBubbleAccessibilityUniq();
  animateNavBubbleIntroUniq();
}

// Charger la position sauvegard√©e
function loadNavBubblePositionUniq() {
  const savedPos = localStorage.getItem('navBubblePositionV2');
  if (savedPos) {
    try {
      const { x, y } = JSON.parse(savedPos);
      const safeX = Math.max(10, Math.min(x, window.innerWidth - 70));
      const safeY = Math.max(10, Math.min(y, window.innerHeight - 70));
      
      navBubbleContainerUniq.style.left = `${safeX}px`;
      navBubbleContainerUniq.style.top = `${safeY}px`;
      navBubbleContainerUniq.style.right = 'auto';
      navBubbleContainerUniq.style.bottom = 'auto';
    } catch (e) {
      console.warn('Position de bulle invalide, utilisation par d√©faut');
    }
  }
}

// Sauvegarder la position
function saveNavBubblePositionUniq() {
  const rect = navBubbleContainerUniq.getBoundingClientRect();
  localStorage.setItem('navBubblePositionV2', JSON.stringify({
    x: rect.left,
    y: rect.top
  }));
}

// Attacher les √©v√©nements
function attachNavBubbleEventsUniq() {
  // √âv√©nements desktop
  navBubbleToggleUniq.addEventListener('mousedown', startNavBubbleDragDesktopUniq);
  navBubbleToggleUniq.addEventListener('click', handleNavBubbleToggleClickUniq);
  navBubbleCloseTriggerUniq.addEventListener('click', closeNavBubbleMenuUniq);
  
  // √âv√©nements mobile touch
  navBubbleToggleUniq.addEventListener('touchstart', startNavBubbleTouchUniq, { passive: false });
  navBubbleToggleUniq.addEventListener('touchmove', handleNavBubbleTouchMoveUniq, { passive: false });
  navBubbleToggleUniq.addEventListener('touchend', endNavBubbleTouchUniq);
  
  // √âv√©nements globaux
  document.addEventListener('mousemove', handleNavBubbleDragDesktopUniq);
  document.addEventListener('mouseup', stopNavBubbleDragDesktopUniq);
  document.addEventListener('click', handleDocumentClickNavBubbleUniq);
  document.addEventListener('keydown', handleNavBubbleKeyboardUniq);
  window.addEventListener('resize', handleNavBubbleResizeUniq);
  
  // Pr√©venir le drag des images dans les liens
  navBubbleMenuLinksUniq.forEach(link => {
    link.addEventListener('dragstart', (e) => e.preventDefault());
  });
}

// Gestion du clic sur le bouton toggle
function handleNavBubbleToggleClickUniq(e) {
  if (navBubbleDragStateUniq.isDragging) {
    navBubbleDragStateUniq.isDragging = false;
    saveNavBubblePositionUniq();
    return;
  }
  
  e.stopPropagation();
  toggleNavBubbleMenuUniq();
}

// Ouvrir/fermer le menu
function toggleNavBubbleMenuUniq() {
  if (navBubbleMenuStateUniq.isAnimating) return;
  
  navBubbleMenuStateUniq.isAnimating = true;
  
  if (navBubbleMenuStateUniq.isOpen) {
    closeNavBubbleMenuUniq();
  } else {
    openNavBubbleMenuUniq();
  }
  
  setTimeout(() => {
    navBubbleMenuStateUniq.isAnimating = false;
  }, 300);
}

// Ouvrir le menu
function openNavBubbleMenuUniq() {
  navBubbleMenuStateUniq.isOpen = true;
  navBubbleDropdownUniq.classList.remove('opacity-0', 'scale-95', 'pointer-events-none');
  navBubbleDropdownUniq.classList.add('opacity-100', 'scale-100', 'pointer-events-auto');
  navBubbleToggleUniq.classList.add('from-purple-600', 'to-pink-600', 'ring-4', 'ring-purple-500/30');
  
  // Feedback haptique sur mobile
  if ('vibrate' in navigator) {
    navigator.vibrate(30);
  }
}

// Fermer le menu
function closeNavBubbleMenuUniq() {
  navBubbleMenuStateUniq.isOpen = false;
  navBubbleDropdownUniq.classList.remove('opacity-100', 'scale-100', 'pointer-events-auto');
  navBubbleDropdownUniq.classList.add('opacity-0', 'scale-95', 'pointer-events-none');
  navBubbleToggleUniq.classList.remove('from-purple-600', 'to-pink-600', 'ring-4', 'ring-purple-500/30');
}

// Drag desktop
function startNavBubbleDragDesktopUniq(e) {
  if (e.button !== 0) return; // Seulement clic gauche
  
  navBubbleDragStateUniq.isDragging = true;
  const rect = navBubbleContainerUniq.getBoundingClientRect();
  
  navBubbleDragStateUniq.startX = e.clientX;
  navBubbleDragStateUniq.startY = e.clientY;
  navBubbleDragStateUniq.startLeft = rect.left;
  navBubbleDragStateUniq.startTop = rect.top;
  
  navBubbleContainerUniq.style.transition = 'none';
  navBubbleContainerUniq.style.cursor = 'grabbing';
  closeNavBubbleMenuUniq();
}

function handleNavBubbleDragDesktopUniq(e) {
  if (!navBubbleDragStateUniq.isDragging) return;
  
  const deltaX = e.clientX - navBubbleDragStateUniq.startX;
  const deltaY = e.clientY - navBubbleDragStateUniq.startY;
  
  let newLeft = navBubbleDragStateUniq.startLeft + deltaX;
  let newTop = navBubbleDragStateUniq.startTop + deltaY;
  
  // Garder dans les limites
  const maxX = window.innerWidth - navBubbleContainerUniq.offsetWidth - 10;
  const maxY = window.innerHeight - navBubbleContainerUniq.offsetHeight - 10;
  
  newLeft = Math.max(10, Math.min(newLeft, maxX));
  newTop = Math.max(10, Math.min(newTop, maxY));
  
  navBubbleContainerUniq.style.left = `${newLeft}px`;
  navBubbleContainerUniq.style.top = `${newTop}px`;
  navBubbleContainerUniq.style.right = 'auto';
  navBubbleContainerUniq.style.bottom = 'auto';
}

function stopNavBubbleDragDesktopUniq() {
  if (!navBubbleDragStateUniq.isDragging) return;
  
  navBubbleDragStateUniq.isDragging = false;
  navBubbleContainerUniq.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
  navBubbleContainerUniq.style.cursor = '';
  saveNavBubblePositionUniq();
}

// Touch mobile
function startNavBubbleTouchUniq(e) {
  if (e.touches.length !== 1) return;
  
  const touch = e.touches[0];
  
  navBubbleTouchTimerUniq = setTimeout(() => {
    // Long press pour drag
    navBubbleDragStateUniq.isDragging = true;
    const rect = navBubbleContainerUniq.getBoundingClientRect();
    
    navBubbleDragStateUniq.startX = touch.clientX;
    navBubbleDragStateUniq.startY = touch.clientY;
    navBubbleDragStateUniq.startLeft = rect.left;
    navBubbleDragStateUniq.startTop = rect.top;
    
    navBubbleContainerUniq.style.transition = 'none';
    closeNavBubbleMenuUniq();
    
    if ('vibrate' in navigator) {
      navigator.vibrate(50);
    }
  }, 500); // 500ms pour long press
}

function handleNavBubbleTouchMoveUniq(e) {
  if (!navBubbleDragStateUniq.isDragging || e.touches.length !== 1) return;
  
  e.preventDefault();
  const touch = e.touches[0];
  
  const deltaX = touch.clientX - navBubbleDragStateUniq.startX;
  const deltaY = touch.clientY - navBubbleDragStateUniq.startY;
  
  let newLeft = navBubbleDragStateUniq.startLeft + deltaX;
  let newTop = navBubbleDragStateUniq.startTop + deltaY;
  
  const maxX = window.innerWidth - navBubbleContainerUniq.offsetWidth - 10;
  const maxY = window.innerHeight - navBubbleContainerUniq.offsetHeight - 10;
  
  newLeft = Math.max(10, Math.min(newLeft, maxX));
  newTop = Math.max(10, Math.min(newTop, maxY));
  
  navBubbleContainerUniq.style.left = `${newLeft}px`;
  navBubbleContainerUniq.style.top = `${newTop}px`;
}

function endNavBubbleTouchUniq() {
  clearTimeout(navBubbleTouchTimerUniq);
  
  if (navBubbleDragStateUniq.isDragging) {
    navBubbleDragStateUniq.isDragging = false;
    navBubbleContainerUniq.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
    saveNavBubblePositionUniq();
  }
}

// Gestion des clics en dehors
function handleDocumentClickNavBubbleUniq(e) {
  if (!navBubbleMenuStateUniq.isOpen) return;
  
  const isClickInside = navBubbleContainerUniq.contains(e.target);
  
  if (!isClickInside) {
    closeNavBubbleMenuUniq();
  }
}

// Gestion du clavier
function handleNavBubbleKeyboardUniq(e) {
  if (e.key === 'Escape' && navBubbleMenuStateUniq.isOpen) {
    closeNavBubbleMenuUniq();
  }
  
  // Navigation au clavier dans le menu
  if (e.key === 'Tab' && navBubbleMenuStateUniq.isOpen) {
    e.preventDefault();
    const currentIndex = Array.from(navBubbleMenuLinksUniq).indexOf(document.activeElement);
    let nextIndex;
    
    if (e.shiftKey) {
      nextIndex = currentIndex > 0 ? currentIndex - 1 : navBubbleMenuLinksUniq.length - 1;
    } else {
      nextIndex = currentIndex < navBubbleMenuLinksUniq.length - 1 ? currentIndex + 1 : 0;
    }
    
    if (navBubbleMenuLinksUniq[nextIndex]) {
      navBubbleMenuLinksUniq[nextIndex].focus();
    }
  }
}

// Redimensionnement
function handleNavBubbleResizeUniq() {
  const rect = navBubbleContainerUniq.getBoundingClientRect();
  const maxX = window.innerWidth - navBubbleContainerUniq.offsetWidth - 10;
  const maxY = window.innerHeight - navBubbleContainerUniq.offsetHeight - 10;
  
  if (rect.left > maxX || rect.top > maxY) {
    // R√©initialiser si hors √©cran
    navBubbleContainerUniq.style.left = 'auto';
    navBubbleContainerUniq.style.top = 'auto';
    navBubbleContainerUniq.style.right = '1rem';
    navBubbleContainerUniq.style.bottom = '1rem';
    localStorage.removeItem('navBubblePositionV2');
  }
}

// Accessibilit√©
function setupNavBubbleAccessibilityUniq() {
  navBubbleToggleUniq.setAttribute('aria-label', 'Ouvrir le menu de navigation');
  navBubbleToggleUniq.setAttribute('aria-expanded', 'false');
  navBubbleToggleUniq.setAttribute('role', 'button');
  
  navBubbleDropdownUniq.setAttribute('aria-hidden', 'true');
  navBubbleDropdownUniq.setAttribute('role', 'menu');
  
  navBubbleMenuLinksUniq.forEach((link, index) => {
    link.setAttribute('role', 'menuitem');
    link.setAttribute('tabindex', '-1');
  });
  
  // Mettre √† jour les attributs ARIA quand le menu s'ouvre/ferme
  const observerNavBubbleUniq = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.attributeName === 'class') {
        const isOpen = navBubbleDropdownUniq.classList.contains('opacity-100');
        navBubbleToggleUniq.setAttribute('aria-expanded', isOpen.toString());
        navBubbleDropdownUniq.setAttribute('aria-hidden', (!isOpen).toString());
        
        navBubbleMenuLinksUniq.forEach(link => {
          link.setAttribute('tabindex', isOpen ? '0' : '-1');
        });
      }
    });
  });
  
  observerNavBubbleUniq.observe(navBubbleDropdownUniq, {
    attributes: true,
    attributeFilter: ['class']
  });
}

// Animation d'introduction
function animateNavBubbleIntroUniq() {
  navBubbleContainerUniq.classList.add('animate-bounce');
  setTimeout(() => {
    navBubbleContainerUniq.classList.remove('animate-bounce');
  }, 1500);
}

// Initialisation
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    setupNavBubbleUniq();
  }, 100);
});
</script>

<style>
/* Styles additionnels pour la bulle de navigation */
.custom-scrollbar-uniq::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar-uniq::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.custom-scrollbar-uniq::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

.custom-scrollbar-uniq::-webkit-scrollbar-thumb:hover {
  background: #a1a1a1;
}

.dark .custom-scrollbar-uniq::-webkit-scrollbar-track {
  background: #374151;
}

.dark .custom-scrollbar-uniq::-webkit-scrollbar-thumb {
  background: #4b5563;
}

.dark .custom-scrollbar-uniq::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Animation de pulse am√©lior√©e */
@keyframes navBubblePulseUniq {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 15px 35px rgba(99, 102, 241, 0.5);
  }
}

.animate-pulse {
  animation: navBubblePulseUniq 2s ease-in-out infinite;
}

/* Animation de rebond pour l'introduction */
@keyframes navBubbleBounceUniq {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-20px);
  }
}

.animate-bounce {
  animation: navBubbleBounceUniq 0.5s ease-in-out 3;
}

/* Support du dark mode avanc√© */
@media (prefers-color-scheme: dark) {
  #navBubbleBtnUniq {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
  }
  
  #navBubbleBtnUniq:hover {
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
  }
}

/* Responsive am√©lior√© */
@media (max-width: 640px) {
  #navBubbleMenuUniq {
    width: calc(100vw - 2rem);
    max-width: 320px;
    right: 50%;
    transform: translateX(50%) scale(0.95);
    transform-origin: bottom center;
  }
  
  #navBubbleMenuUniq.opacity-100 {
    transform: translateX(50%) scale(1);
  }
  
  #navBubbleUniq {
    bottom: 1rem;
    right: 1rem;
  }
}

/* Transition fluide pour le menu */
#navBubbleMenuUniq {
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
              transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Focus styles pour accessibilit√© */
.navBubbleLinkUniq:focus-visible {
  outline: 2px solid #4f46e5;
  outline-offset: -2px;
}

#navBubbleBtnUniq:focus-visible {
  outline: 2px solid #4f46e5;
  outline-offset: 2px;
}
</style>
<!-- =================================================================================================================================================
 ====================================================================================================================================
 ============================================================================================
  -->



  <!-- =====================================================================
     ===================================================================== -->
<div id="overlay-container"></div>
<script>
  fetch('overlay.html')
    .then(res => res.text())
    .then(html => {
      document.getElementById('overlay-container').innerHTML = html;
      initSecurityOverlay();
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>


<script src="overlay.js"></script>
<!-- ===================================================
 ==============
 ====================================================== -->
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- Scripts -->
    <script>
        // ============================================
        // CONFIGURATION ET INITIALISATION
        // ============================================
        
        // Configuration Firebase (OBLIGATOIRE)
const firebaseConfig = {
  apiKey: "AIzaSyCOifibU2E6Vo-3Ohg-WmAHa43sa5HyFuw",
  authDomain: "smartcutservices.firebaseapp.com",
  projectId: "smartcutservices",
  storageBucket: "smartcutservices.firebasestorage.app",
  messagingSenderId: "589013273323",
  appId: "1:589013273323:web:415772e7b94f6bb37d8cae",
  measurementId: "G-R8GJXQP7BD"
};

        
        // Variables globales
        let db;
        let unsubscribeCallbacks = [];
        let pendingAction = null;
        let editingAdvantageId = null;
        
        // ============================================
        // INITIALISATION DE L'APPLICATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser Firebase
            initializeFirebase();
            
            // Configurer les √©couteurs d'√©v√©nements
            setupEventListeners();
            
            // Mettre √† jour l'horodatage
            updateTimestamp();
            
            // Mettre √† jour toutes les 30 secondes
            setInterval(updateTimestamp, 30000);
        });
        
        // ============================================
        // FONCTIONS D'INITIALISATION
        // ============================================
        
        function initializeFirebase() {
            try {
                // V√©rifier si Firebase est disponible
                if (typeof firebase === 'undefined') {
                    showToast('error', 'Erreur', 'Firebase n\'est pas charg√©. V√©rifiez votre connexion internet.');
                    updateConnectionStatus(false);
                    return;
                }
                
                // Initialiser Firebase
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                
                // Configurer les param√®tres de Firestore
                if (window.location.hostname === "localhost") {
                    db.settings({
                        host: "localhost:8080",
                        ssl: false
                    });
                }
                
                updateConnectionStatus(true);
                showToast('success', 'Connect√©', 'Connexion √† Firebase √©tablie avec succ√®s');
                console.log('Firebase Admin initialis√©');
                
                // Initialiser les donn√©es apr√®s la connexion
                setTimeout(() => {
                    initializeData();
                }, 500);
                
            } catch (error) {
                console.error('Erreur Firebase:', error);
                showToast('error', 'Erreur de connexion', 'Impossible de se connecter √† la base de donn√©es');
                updateConnectionStatus(false);
            }
        }
        
        function updateConnectionStatus(connected) {
            const indicator = document.getElementById('connection-indicator');
            const text = document.getElementById('connection-text');
            
            if (connected) {
                indicator.className = 'w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse';
                text.textContent = 'Connect√©';
            } else {
                indicator.className = 'w-2 h-2 rounded-full bg-red-500 mr-2';
                text.textContent = 'D√©connect√©';
            }
        }
        
        function setupEventListeners() {
            // Navigation
            document.getElementById('mobile-menu-btn').addEventListener('click', toggleMobileMenu);
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', smoothScrollToSection);
            });
            
            // Boutons g√©n√©raux
            document.getElementById('refresh-data').addEventListener('click', refreshAllData);
            document.getElementById('add-advantage-btn').addEventListener('click', openAddAdvantageModal);
            
            // Modal avantage
            document.getElementById('close-modal').addEventListener('click', closeAdvantageModal);
            document.getElementById('cancel-modal').addEventListener('click', closeAdvantageModal);
            document.getElementById('advantage-form').addEventListener('submit', saveAdvantage);
            
            // Modal confirmation
            document.getElementById('cancel-confirm').addEventListener('click', closeConfirmModal);
            document.getElementById('confirm-action').addEventListener('click', handleConfirmAction);
            document.getElementById('close-toast').addEventListener('click', closeToast);
            
            // CTA Form
            document.getElementById('cta-form').addEventListener('submit', saveCTA);
            document.getElementById('cta-title').addEventListener('input', updateCTAPreview);
            document.getElementById('cta-subtitle').addEventListener('input', updateCTAPreview);
            
            // Navigation par ancres
            window.addEventListener('hashchange', highlightActiveSection);
        }
        
        function initializeData() {
            if (!db) {
                console.log('Base de donn√©es non disponible');
                return;
            }
            
            // Charger toutes les sections
            loadHeroProducts();
            loadAdvantages();
            loadFeaturedProducts();
            loadProcessStatus();
            loadDeliveryStatus();
            loadCTA();
            
            // √âcouter les changements en temps r√©el
            setupRealtimeListeners();
        }
        
        function setupRealtimeListeners() {
            if (!db) return;
            
            // √âcouter les produits pour les compteurs
            const productsUnsubscribe = db.collection('products')
                .onSnapshot(snapshot => {
                    updateProductsCounters(snapshot);
                }, error => {
                    console.error('Erreur √©coute produits:', error);
                    showToast('error', 'Erreur', 'Probl√®me de connexion en temps r√©el');
                });
            
            unsubscribeCallbacks.push(productsUnsubscribe);
        }
        
        // ============================================
        // üü¢ SECTION A ‚Äî GESTION DU HERO
        // ============================================
        
        function loadHeroProducts() {
            if (!db) {
                showErrorState('hero-products-list', 'Base de donn√©es non connect√©e');
                return;
            }
            
            const container = document.getElementById('hero-products-list');
            showLoadingState(container, 'Chargement des produits...');
            
            db.collection('products')
                .orderBy('name')
                .get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        showEmptyState(container, 'Aucun produit disponible');
                        return;
                    }
                    
                    renderHeroProducts(querySnapshot);
                })
                .catch(error => {
                    console.error('Erreur chargement produits hero:', error);
                    showErrorState(container, 'Erreur de chargement');
                    showToast('error', 'Erreur', 'Impossible de charger les produits');
                });
        }
        
        function renderHeroProducts(querySnapshot) {
            const container = document.getElementById('hero-products-list');
            container.innerHTML = '';
            
            let heroCount = 0;
            
            querySnapshot.forEach(doc => {
                const product = { id: doc.id, ...doc.data() };
                const isInHero = product.showInHero === true;
                if (isInHero) heroCount++;
                
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-100 hover:bg-gray-50 transition-colors';
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-lg overflow-hidden mr-4 flex-shrink-0">
                                <img src="${product.imageName || 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100'}" 
                                     alt="${product.name || 'Produit'}"
                                     class="w-full h-full object-cover"
                                     onerror="this.src='https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100'">
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">${product.name || 'Sans nom'}</div>
                                <div class="text-sm text-gray-500">${product.category || 'Non cat√©goris√©'}</div>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-4">
                        <div class="font-semibold text-gray-900">${(product.price || 0)}G</div>
                        ${product.showOldPrice && product.oldPrice ? 
                            `<div class="text-sm text-gray-400 line-through">${(product.oldPrice)} G</div>` : ''}
                    </td>
                    <td class="py-4 px-4">
                        ${product.isAvailable !== false ? 
                            `<span class="badge badge-success">Disponible</span>` : 
                            `<span class="badge badge-danger">Indisponible</span>`}
                    </td>
                    <td class="py-4 px-4">
                        <label class="toggle-switch">
                            <input type="checkbox" ${isInHero ? 'checked' : ''} 
                                   data-product-id="${product.id}"
                                   class="hero-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </td>
                    <td class="py-4 px-4">
                        <div class="flex space-x-2">
                            ${isInHero ? 
                                `<span class="badge badge-info">Hero</span>` :                                 ''}
                        </div>
                    </td>
                `;
                container.appendChild(row);
            });
            
            // Mettre √† jour le compteur
            document.getElementById('hero-count').textContent = heroCount;
            
            // Ajouter les √©couteurs d'√©v√©nements aux toggles
            document.querySelectorAll('.hero-toggle').forEach(toggle => {
                toggle.addEventListener('change', handleHeroToggle);
            });
        }
        
        function handleHeroToggle(event) {
            const productId = event.target.dataset.productId;
            const showInHero = event.target.checked;
            
            if (!db || !productId) {
                showToast('error', 'Erreur', 'Base de donn√©es non disponible');
                event.target.checked = !showInHero;
                return;
            }
            
            db.collection('products').doc(productId).update({
                showInHero: showInHero,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                const action = showInHero ? 'ajout√© au' : 'retir√© du';
                showToast('success', 'Succ√®s', `Produit ${action} Hero`);
                
                // Mettre √† jour le compteur
                const currentCount = parseInt(document.getElementById('hero-count').textContent);
                const newCount = showInHero ? currentCount + 1 : Math.max(0, currentCount - 1);
                document.getElementById('hero-count').textContent = newCount;
            })
            .catch(error => {
                console.error('Erreur mise √† jour Hero:', error);
                showToast('error', 'Erreur', 'Impossible de mettre √† jour le produit');
                // Revert the toggle
                event.target.checked = !showInHero;
            });
        }
        
        // ============================================
        // üü° SECTION B ‚Äî AVANTAGES
        // ============================================
        
        function loadAdvantages() {
            if (!db) {
                showErrorState('advantages-list', 'Base de donn√©es non connect√©e');
                return;
            }
            
            const container = document.getElementById('advantages-list');
            showLoadingState(container, 'Chargement des avantages...');
            
            db.collection('home_content')
                .doc('advantages')
                .get()
                .then(doc => {
                    if (!doc.exists) {
                        // Cr√©er le document s'il n'existe pas
                        return db.collection('home_content').doc('advantages').set({
                            items: [],
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        }).then(() => {
                            showEmptyState(container, 'Aucun avantage configur√©. Cliquez sur "Ajouter un avantage" pour commencer.');
                        });
                    }
                    
                    const data = doc.data();
                    const advantages = data.items || [];
                    
                    if (advantages.length === 0) {
                        showEmptyState(container, 'Aucun avantage configur√©. Cliquez sur "Ajouter un avantage" pour commencer.');
                        return;
                    }
                    
                    renderAdvantages(advantages);
                })
                .catch(error => {
                    console.error('Erreur chargement avantages:', error);
                    showErrorState(container, 'Erreur de chargement');
                    showToast('error', 'Erreur', 'Impossible de charger les avantages');
                });
        }
        
        function renderAdvantages(advantages) {
            const container = document.getElementById('advantages-list');
            container.innerHTML = '';
            
            advantages.forEach((advantage, index) => {
                const card = document.createElement('div');
                card.className = 'admin-card p-5 fade-enter';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mr-4">
                                <i class="${advantage.icon || 'fas fa-star'} text-blue-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-gray-900">${advantage.title || 'Sans titre'}</h3>
                                <p class="text-sm text-gray-500">${advantage.description || 'Sans description'}</p>
                            </div>
                        </div>
                        <span class="badge badge-info">#${index + 1}</span>
                    </div>
                    
                    <div class="flex justify-end space-x-2">
                        <button class="edit-advantage px-3 py-1.5 text-sm bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors"
                                data-index="${index}">
                            <i class="fas fa-edit mr-1"></i>Modifier
                        </button>
                        <button class="delete-advantage px-3 py-1.5 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors"
                                data-index="${index}">
                            <i class="fas fa-trash mr-1"></i>Supprimer
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
            
            // Mettre √† jour le compteur
            document.getElementById('total-advantages').textContent = advantages.length;
            
            // Ajouter les √©couteurs d'√©v√©nements
            document.querySelectorAll('.edit-advantage').forEach(button => {
                button.addEventListener('click', handleEditAdvantage);
            });
            
            document.querySelectorAll('.delete-advantage').forEach(button => {
                button.addEventListener('click', handleDeleteAdvantage);
            });
        }
        
        function openAddAdvantageModal() {
            editingAdvantageId = null;
            document.getElementById('modal-title').textContent = 'Nouvel avantage';
            document.getElementById('advantage-form').reset();
            document.getElementById('advantage-modal').classList.remove('hidden');
        }
        
        function closeAdvantageModal() {
            document.getElementById('advantage-modal').classList.add('hidden');
            editingAdvantageId = null;
        }
        
        function saveAdvantage(event) {
            event.preventDefault();
            
            if (!db) {
                showToast('error', 'Erreur', 'Base de donn√©es non connect√©e');
                return;
            }
            
            const icon = document.getElementById('advantage-icon').value;
            const title = document.getElementById('advantage-title').value.trim();
            const description = document.getElementById('advantage-description').value.trim();
            
            if (!icon || !title || !description) {
                showToast('warning', 'Champs requis', 'Veuillez remplir tous les champs');
                return;
            }
            
            const advantage = { icon, title, description };
            
            // D√©sactiver le bouton pendant la sauvegarde
            const saveButton = document.getElementById('save-advantage');
            saveButton.disabled = true;
            saveButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Enregistrement...';
            
            db.collection('home_content')
                .doc('advantages')
                .get()
                .then(doc => {
                    const data = doc.exists ? doc.data() : { items: [] };
                    const advantages = data.items || [];
                    
                    if (editingAdvantageId !== null) {
                        // Modification
                        advantages[editingAdvantageId] = advantage;
                    } else {
                        // Ajout
                        advantages.push(advantage);
                    }
                    
                    return db.collection('home_content').doc('advantages').update({
                        items: advantages,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    showToast('success', 'Succ√®s', 
                        editingAdvantageId !== null ? 'Avantage modifi√©' : 'Avantage ajout√©');
                    
                    closeAdvantageModal();
                    loadAdvantages(); // Recharger la liste
                })
                .catch(error => {
                    console.error('Erreur sauvegarde avantage:', error);
                    showToast('error', 'Erreur', 'Impossible de sauvegarder l\'avantage');
                })
                .finally(() => {
                    // R√©activer le bouton
                    saveButton.disabled = false;
                    saveButton.innerHTML = '<i class="fas fa-save mr-2"></i>Enregistrer';
                });
        }
        
        function handleEditAdvantage(event) {
            const index = parseInt(event.target.dataset.index);
            editingAdvantageId = index;
            
            if (!db) {
                showToast('error', 'Erreur', 'Base de donn√©es non connect√©e');
                return;
            }
            
            db.collection('home_content')
                .doc('advantages')
                .get()
                .then(doc => {
                    if (!doc.exists) {
                        showToast('error', 'Erreur', 'Document non trouv√©');
                        return;
                    }
                    
                    const data = doc.data();
                    const advantages = data.items || [];
                    const advantage = advantages[index];
                    
                    if (advantage) {
                        document.getElementById('modal-title').textContent = 'Modifier l\'avantage';
                        document.getElementById('advantage-icon').value = advantage.icon;
                        document.getElementById('advantage-title').value = advantage.title;
                        document.getElementById('advantage-description').value = advantage.description;
                        document.getElementById('advantage-modal').classList.remove('hidden');
                    } else {
                        showToast('error', 'Erreur', 'Avantage non trouv√©');
                    }
                })
                .catch(error => {
                    console.error('Erreur √©dition avantage:', error);
                    showToast('error', 'Erreur', 'Impossible de charger l\'avantage');
                });
        }
        
        function handleDeleteAdvantage(event) {
            const index = parseInt(event.target.dataset.index);
            
            pendingAction = {
                type: 'deleteAdvantage',
                index: index
            };
            
            document.getElementById('confirm-title').textContent = 'Supprimer l\'avantage';
            document.getElementById('confirm-message').textContent = '√ätes-vous s√ªr de vouloir supprimer cet avantage ? Cette action est irr√©versible.';
            document.getElementById('confirm-modal').classList.remove('hidden');
        }
        
        function executeDeleteAdvantage(index) {
            if (!db) {
                showToast('error', 'Erreur', 'Base de donn√©es non connect√©e');
                return;
            }
            
            db.collection('home_content')
                .doc('advantages')
                .get()
                .then(doc => {
                    if (!doc.exists) {
                        showToast('error', 'Erreur', 'Document non trouv√©');
                        return;
                    }
                    
                    const data = doc.data();
                    const advantages = data.items || [];
                    
                    // Supprimer l'√©l√©ment √† l'index donn√©
                    advantages.splice(index, 1);
                    
                    return db.collection('home_content').doc('advantages').update({
                        items: advantages,
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    showToast('success', 'Succ√®s', 'Avantage supprim√©');
                    loadAdvantages(); // Recharger la liste
                })
                .catch(error => {
                    console.error('Erreur suppression avantage:', error);
                    showToast('error', 'Erreur', 'Impossible de supprimer l\'avantage');
                });
        }
        
        // ============================================
        // üîµ SECTION C ‚Äî PRODUITS POPULAIRES
        // ============================================
        
        function loadFeaturedProducts() {
            if (!db) {
                showErrorState('featured-products-list', 'Base de donn√©es non connect√©e');
                return;
            }
            
            const container = document.getElementById('featured-products-list');
            showLoadingState(container, 'Chargement des produits...');
            
            db.collection('products')
                .orderBy('name')
                .get()
                .then(querySnapshot => {
                    if (querySnapshot.empty) {
                        showEmptyState(container, 'Aucun produit disponible');
                        return;
                    }
                    
                    renderFeaturedProducts(querySnapshot);
                })
                .catch(error => {
                    console.error('Erreur chargement produits:', error);
                    showErrorState(container, 'Erreur de chargement');
                    showToast('error', 'Erreur', 'Impossible de charger les produits');
                });
        }
        
        function renderFeaturedProducts(querySnapshot) {
            const container = document.getElementById('featured-products-list');
            container.innerHTML = '';
            
            let popularCount = 0;
            let newCount = 0;
            
            querySnapshot.forEach(doc => {
                const product = { id: doc.id, ...doc.data() };
                const isPopular = product.isPopular === true;
                const isNew = product.isNew === true;
                
                if (isPopular) popularCount++;
                if (isNew) newCount++;
                
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-100 hover:bg-gray-50 transition-colors';
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-lg overflow-hidden mr-3 flex-shrink-0">
                                <img src="${product.imageName || 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=80'}" 
                                     alt="${product.name || 'Produit'}"
                                     class="w-full h-full object-cover"
                                     onerror="this.src='https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=80'">
                            </div>
                            <div class="font-medium text-gray-900">${product.name || 'Sans nom'}</div>
                        </div>
                    </td>
                    <td class="py-4 px-4">
                        <div class="font-semibold text-gray-900">${(product.price || 0)} G</div>
                    </td>
                    <td class="py-4 px-4">
                        <label class="toggle-switch">
                            <input type="checkbox" ${isPopular ? 'checked' : ''} 
                                   data-product-id="${product.id}"
                                   data-field="isPopular"
                                   class="product-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </td>
                    <td class="py-4 px-4">
                        <label class="toggle-switch">
                            <input type="checkbox" ${isNew ? 'checked' : ''} 
                                   data-product-id="${product.id}"
                                   data-field="isNew"
                                   class="product-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </td>
                `;
                container.appendChild(row);
            });
            
            // Mettre √† jour les compteurs
            document.getElementById('popular-count').textContent = popularCount;
            document.getElementById('new-count').textContent = newCount;
            
            // Ajouter les √©couteurs d'√©v√©nements
            document.querySelectorAll('.product-toggle').forEach(toggle => {
                toggle.addEventListener('change', handleProductToggle);
            });
        }
        
        function handleProductToggle(event) {
            const productId = event.target.dataset.productId;
            const field = event.target.dataset.field;
            const value = event.target.checked;
            
            if (!db || !productId || !field) {
                showToast('error', 'Erreur', 'Base de donn√©es non disponible');
                event.target.checked = !value;
                return;
            }
            
            const updateData = {
                [field]: value,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            db.collection('products').doc(productId).update(updateData)
                .then(() => {
                    const fieldName = field === 'isPopular' ? 'populaire' : 'nouveau';
                    const action = value ? 'marqu√© comme' : 'retir√© des';
                    showToast('success', 'Succ√®s', `Produit ${action} ${fieldName}s`);
                    
                    // Mettre √† jour les compteurs
                    const counterId = field === 'isPopular' ? 'popular-count' : 'new-count';
                    const currentCount = parseInt(document.getElementById(counterId).textContent);
                    const newCount = value ? currentCount + 1 : Math.max(0, currentCount - 1);
                    document.getElementById(counterId).textContent = newCount;
                })
                .catch(error => {
                    console.error(`Erreur mise √† jour ${field}:`, error);
                    showToast('error', 'Erreur', 'Impossible de mettre √† jour le produit');
                    // Revert the toggle
                    event.target.checked = !value;
                });
        }
        
        // ============================================
        // üü£ SECTION D ‚Äî SECTION PROCESSUS
        // ============================================
        
        function loadProcessStatus() {
            if (!db) {
                console.log('Base de donn√©es non disponible pour le processus');
                return;
            }
            
            db.collection('home_content')
                .doc('process')
                .get()
                .then(doc => {
                    const toggle = document.getElementById('process-toggle');
                    const status = document.getElementById('process-status');
                    
                    if (!doc.exists) {
                        // Cr√©er le document avec enabled: false par d√©faut
                        db.collection('home_content').doc('process').set({
                            enabled: false,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        toggle.checked = false;
                        status.textContent = 'D√©sactiv√©';
                    } else {
                        const data = doc.data();
                        const enabled = data.enabled === true;
                        toggle.checked = enabled;
                        status.textContent = enabled ? 'Activ√©' : 'D√©sactiv√©';
                    }
                    
                    // Ajouter l'√©couteur d'√©v√©nement
                    toggle.addEventListener('change', handleProcessToggle);
                })
                .catch(error => {
                    console.error('Erreur chargement processus:', error);
                    showToast('error', 'Erreur', 'Impossible de charger le statut du processus');
                });
        }
        
        function handleProcessToggle(event) {
            const enabled = event.target.checked;
            
            if (!db) {
                showToast('error', 'Erreur', 'Base de donn√©es non disponible');
                event.target.checked = !enabled;
                return;
            }
            
            db.collection('home_content').doc('process').update({
                enabled: enabled,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                const status = document.getElementById('process-status');
                status.textContent = enabled ? 'Activ√©' : 'D√©sactiv√©';
                showToast('success', 'Succ√®s', 
                    enabled ? 'Section processus activ√©e' : 'Section processus d√©sactiv√©e');
            })
            .catch(error => {
                console.error('Erreur mise √† jour processus:', error);
                showToast('error', 'Erreur', 'Impossible de mettre √† jour la section processus');
                // Revert the toggle
                event.target.checked = !enabled;
            });
        }
        
        // ============================================
        // üü† SECTION E ‚Äî OPTIONS DE LIVRAISON
        // ============================================
        
        function loadDeliveryStatus() {
            if (!db) {
                console.log('Base de donn√©es non disponible pour la livraison');
                return;
            }
            
            db.collection('home_content')
                .doc('delivery_display')
                .get()
                .then(doc => {
                    const toggle = document.getElementById('delivery-toggle');
                    const status = document.getElementById('delivery-status');
                    
                    if (!doc.exists) {
                        // Cr√©er le document avec enabled: false par d√©faut
                        db.collection('home_content').doc('delivery_display').set({
                            enabled: false,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        toggle.checked = false;
                        status.textContent = 'D√©sactiv√©';
                    } else {
                        const data = doc.data();
                        const enabled = data.enabled === true;
                        toggle.checked = enabled;
                        status.textContent = enabled ? 'Activ√©' : 'D√©sactiv√©';
                    }
                    
                    // Ajouter l'√©couteur d'√©v√©nement
                    toggle.addEventListener('change', handleDeliveryToggle);
                })
                .catch(error => {
                    console.error('Erreur chargement livraison:', error);
                    showToast('error', 'Erreur', 'Impossible de charger le statut de livraison');
                });
        }
        
        function handleDeliveryToggle(event) {
            const enabled = event.target.checked;
            
            if (!db) {
                showToast('error', 'Erreur', 'Base de donn√©es non disponible');
                event.target.checked = !enabled;
                return;
            }
            
            db.collection('home_content').doc('delivery_display').update({
                enabled: enabled,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                const status = document.getElementById('delivery-status');
                status.textContent = enabled ? 'Activ√©' : 'D√©sactiv√©';
                showToast('success', 'Succ√®s', 
                    enabled ? 'Section livraison activ√©e' : 'Section livraison d√©sactiv√©e');
            })
            .catch(error => {
                console.error('Erreur mise √† jour livraison:', error);
                showToast('error', 'Erreur', 'Impossible de mettre √† jour la section livraison');
                // Revert the toggle
                event.target.checked = !enabled;
            });
        }
        
        // ============================================
        // üî¥ SECTION F ‚Äî CTA FINAL
        // ============================================
        
        function loadCTA() {
            if (!db) {
                console.log('Base de donn√©es non disponible pour le CTA');
                return;
            }
            
            db.collection('home_content')
                .doc('cta')
                .get()
                .then(doc => {
                    if (!doc.exists) {
                        // Valeurs par d√©faut
                        const defaultTitle = 'Pr√™t √† d√©couvrir nos produits ?';
                        const defaultSubtitle = 'Rejoignez des milliers de clients satisfaits';
                        
                        // Cr√©er le document avec les valeurs par d√©faut
                        db.collection('home_content').doc('cta').set({
                            title: defaultTitle,
                            subtitle: defaultSubtitle,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        document.getElementById('cta-title').value = defaultTitle;
                        document.getElementById('cta-subtitle').value = defaultSubtitle;
                        updateCTAPreview();
                    } else {
                        const data = doc.data();
                        document.getElementById('cta-title').value = data.title || '';
                        document.getElementById('cta-subtitle').value = data.subtitle || '';
                        updateCTAPreview();
                    }
                })
                .catch(error => {
                    console.error('Erreur chargement CTA:', error);
                    showToast('error', 'Erreur', 'Impossible de charger le CTA');
                });
        }
        
        function saveCTA(event) {
            event.preventDefault();
            
            if (!db) {
                showToast('error', 'Erreur', 'Base de donn√©es non connect√©e');
                return;
            }
            
            const title = document.getElementById('cta-title').value.trim();
            const subtitle = document.getElementById('cta-subtitle').value.trim();
            
            if (!title || !subtitle) {
                showToast('warning', 'Champs requis', 'Veuillez remplir tous les champs');
                return;
            }
            
            // D√©sactiver le bouton pendant la sauvegarde
            const saveButton = document.getElementById('save-cta');
            saveButton.disabled = true;
            saveButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Enregistrement...';
            
            db.collection('home_content').doc('cta').update({
                title: title,
                subtitle: subtitle,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                showToast('success', 'Succ√®s', 'CTA mis √† jour avec succ√®s');
                updateCTAPreview();
            })
            .catch(error => {
                console.error('Erreur sauvegarde CTA:', error);
                showToast('error', 'Erreur', 'Impossible de mettre √† jour le CTA');
            })
            .finally(() => {
                // R√©activer le bouton
                saveButton.disabled = false;
                saveButton.innerHTML = '<i class="fas fa-save mr-2"></i>Enregistrer les modifications';
            });
        }
        
        function updateCTAPreview() {
            const title = document.getElementById('cta-title').value || 'Pr√™t √† d√©couvrir nos produits ?';
            const subtitle = document.getElementById('cta-subtitle').value || 'Rejoignez des milliers de clients satisfaits';
            
            document.getElementById('cta-preview-title').textContent = title;
            document.getElementById('cta-preview-subtitle').textContent = subtitle;
        }
        
        // ============================================
        // FONCTIONS UTILITAIRES
        // ============================================
        
        function formatPrice(price) {
            return new Intl.NumberFormat('fr-FR', {
                style: 'currency',
                currency: 'EUR'
            }).format(price);
        }
        
        function showLoadingState(container, message = 'Chargement...') {
            container.innerHTML = `
                <div class="col-span-full text-center py-12">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mb-3"></div>
                    <p class="text-gray-500">${message}</p>
                </div>
            `;
        }
        
        function showEmptyState(container, message = 'Aucune donn√©e disponible') {
            container.innerHTML = `
                <div class="col-span-full text-center py-12">
                    <i class="fas fa-inbox text-4xl text-gray-300 mb-3"></i>
                    <p class="text-gray-500">${message}</p>
                </div>
            `;
        }
        
        function showErrorState(container, message = 'Erreur de chargement') {
            container.innerHTML = `
                <div class="col-span-full text-center py-12">
                    <i class="fas fa-exclamation-triangle text-4xl text-red-300 mb-3"></i>
                    <p class="text-gray-500">${message}</p>
                    <button onclick="refreshAllData()" class="mt-4 text-primary hover:underline">
                        <i class="fas fa-redo mr-1"></i>R√©essayer
                    </button>
                </div>
            `;
        }
        
        function showToast(type, title, message) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toast-icon');
            const toastTitle = document.getElementById('toast-title');
            const toastMessage = document.getElementById('toast-message');
            const toastProgress = document.getElementById('toast-progress');
            
            // D√©finir l'ic√¥ne et la couleur
            let iconClass, progressColor;
            
            switch(type) {
                case 'success':
                    iconClass = 'fas fa-check-circle text-green-500 text-xl';
                    progressColor = '#10B981'; // green-500
                    break;
                case 'error':
                    iconClass = 'fas fa-times-circle text-red-500 text-xl';
                    progressColor = '#EF4444'; // red-500
                    break;
                case 'warning':
                    iconClass = 'fas fa-exclamation-triangle text-yellow-500 text-xl';
                    progressColor = '#F59E0B'; // yellow-500
                    break;
                default:
                    iconClass = 'fas fa-info-circle text-blue-500 text-xl';
                    progressColor = '#3B82F6'; // blue-500
            }
            
            toastIcon.innerHTML = `<i class="${iconClass}"></i>`;
            toastTitle.textContent = title;
            toastMessage.textContent = message;
            toastProgress.style.backgroundColor = progressColor;
            
            // Afficher la notification
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.querySelector('div').style.transform = 'translateY(0)';
            }, 10);
            
            // Animation de la barre de progression
            toastProgress.style.width = '0%';
            setTimeout(() => {
                toastProgress.style.width = '100%';
                toastProgress.style.transition = 'width 4s linear';
            }, 100);
            
            // Cacher automatiquement apr√®s 4 secondes
            setTimeout(() => {
                closeToast();
            }, 4000);
        }
        
        function closeToast() {
            const toast = document.getElementById('toast');
            toast.querySelector('div').style.transform = 'translateY(100%)';
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 300);
        }
        
        function closeConfirmModal() {
            document.getElementById('confirm-modal').classList.add('hidden');
            pendingAction = null;
        }
        
        function handleConfirmAction() {
            if (!pendingAction) return;
            
            switch(pendingAction.type) {
                case 'deleteAdvantage':
                    executeDeleteAdvantage(pendingAction.index);
                    break;
            }
            
            closeConfirmModal();
        }
        
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobile-nav');
            const buttonIcon = document.getElementById('mobile-menu-btn').querySelector('i');
            
            if (mobileNav.classList.contains('hidden')) {
                mobileNav.classList.remove('hidden');
                buttonIcon.classList.remove('fa-bars');
                buttonIcon.classList.add('fa-times');
            } else {
                mobileNav.classList.add('hidden');
                buttonIcon.classList.remove('fa-times');
                buttonIcon.classList.add('fa-bars');
            }
        }
        
        function smoothScrollToSection(event) {
            event.preventDefault();
            const targetId = this.getAttribute('href');
            if (targetId.startsWith('#')) {
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                    
                    // Fermer le menu mobile si ouvert
                    const mobileNav = document.getElementById('mobile-nav');
                    if (!mobileNav.classList.contains('hidden')) {
                        toggleMobileMenu();
                    }
                    
                    // Surligner la section active
                    highlightActiveSection();
                }
            }
        }
        
        function highlightActiveSection() {
            const sections = ['hero', 'advantages', 'products', 'process', 'delivery', 'cta'];
            const scrollPosition = window.scrollY + 100;
            
            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                const tab = document.querySelector(`.nav-tab[href="#${sectionId}"]`);
                
                if (section && tab) {
                    const sectionTop = section.offsetTop;
                    const sectionBottom = sectionTop + section.offsetHeight;
                    
                    if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                        tab.classList.add('bg-primary', 'text-white');
                        tab.classList.remove('text-gray-700', 'hover:bg-gray-100');
                    } else {
                        tab.classList.remove('bg-primary', 'text-white');
                        tab.classList.add('text-gray-700', 'hover:bg-gray-100');
                    }
                }
            });
        }
        
        function refreshAllData() {
            showToast('info', 'Actualisation', 'Mise √† jour des donn√©es en cours...');
            
            loadHeroProducts();
            loadAdvantages();
            loadFeaturedProducts();
            loadProcessStatus();
            loadDeliveryStatus();
            loadCTA();
            
            updateTimestamp();
        }
        
        function updateProductsCounters(snapshot) {
            const totalProducts = snapshot.size;
            document.getElementById('total-products').textContent = totalProducts;
        }
        
        function updateTimestamp() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('last-update').textContent = timeString;
        }
        
        // Initialiser le surlignage des sections au scroll
        window.addEventListener('scroll', highlightActiveSection);
        highlightActiveSection(); // Initial call
        
        // Exposer certaines fonctions globalement
        window.refreshAllData = refreshAllData;
        
        console.log('Dashboard Admin initialis√© avec succ√®s');
    </script>
</body>
</html>